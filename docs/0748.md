# Spring Boot AOP

> 原文：<https://www.javatpoint.com/spring-boot-aop>

应用程序通常是用多层开发的。典型的 Java 应用程序有以下几层:

*   **Web 层:**使用 REST 或 Web 应用公开**服务**。
*   **业务层:**实现应用的**业务逻辑**。
*   **数据层:**实现应用的**持久化逻辑**。

每个层的职责不同，但有几个适用于所有层的常见方面是**日志记录、安全性、验证、缓存、**等。这些共同的方面被称为**交叉关注。**

如果我们在每一层分别实现这些关注点，代码将变得更加难以维护。为了克服这个问题，**面向方面编程** (AOP)提供了一个解决方案来实现交叉关注。

*   将跨领域关注作为一个方面来实施。
*   定义切入点来指示方面必须被应用的地方。

它确保在一个内聚的代码组件中定义交叉关注点。

## 面向切面编程

AOP **(面向方面编程)**是一种编程模式，它通过允许分离**交叉关注点**来增加模块化。这些跨领域的关注点不同于主要的业务逻辑。我们可以向现有代码添加额外的行为，而无需修改代码本身。

Spring 的 AOP 框架帮助我们实现了这些跨领域的关注点。

使用 AOP，我们在一个地方定义公共功能。我们可以自由定义如何以及在哪里应用这个功能，而无需修改我们要应用新特性的类。交叉关注现在可以被模块化成特殊的类，称为**方面**。

有**两个**方面的好处:

*   首先，每个关注点的逻辑现在都在一个地方，而不是分散在整个代码库中。
*   其次，业务模块只包含他们主要关心的代码。次要的关注点已经转移到**方面**。

方面有责任要落实，称为**建议**。我们可以在一个或多个连接点将方面的功能实现到程序中。

## AOP 的优势

*   它是用纯 Java 实现的。
*   不需要特殊的编译过程。
*   它只支持方法执行连接点。
*   只有运行时编织可用。
*   有两种 AOP 代理可用: **JDK 动态代理**和 **CGLIB 代理。**

## 交叉问题

交叉问题是我们希望在应用程序的多个地方实现的问题。它会影响整个应用程序。

## AOP 术语

*   **方面:**方面是封装**建议**和**切入点**并提供**交叉**的模块。应用程序可以有任意数量的方面。我们可以使用用 **@Aspect** 注释的常规类来实现一个方面。
*   **切入点:**切入点是选择一个或多个执行建议的连接点的表达式。我们可以使用**表达式**或**模式**来定义切入点。它使用与连接点匹配的不同类型的表达式。在 Spring Framework 中，使用了 **AspectJ** 切入点表达语言。
*   **连接点:**连接点是我们应用 **AOP 方面**的应用中的一个点。或者是一个建议的具体执行实例。在 AOP 中，连接点可以是**方法执行、异常处理、改变对象变量值**等。
*   **建议:**建议是我们在之前**或者**之后**进行方法执行的动作。动作是在程序执行期间调用的一段代码。Spring AOP 框架中有**五种**类型的建议:**之前、之后、返回之后、抛出之后、**和**左右的建议。**针对特定的**连接点给出建议。**我们将在本节中进一步讨论这些建议。**
*   **目标对象:**应用建议的对象称为**目标对象**。目标对象总是一个**代理的**它意味着在运行时创建一个子类，其中目标方法被覆盖，并且根据它们的配置包含建议。
*   **编织:**是**将方面**与其他应用类型链接的过程。我们可以在**运行时、加载时、**和**编译时**执行编织。

**代理:**是将建议应用到目标对象后创建的对象，称为**代理**。Spring AOP 实现了 **JDK 动态代理**来创建带有目标类和建议调用的代理类。这些被称为 AOP 代理类。

## 面向对象程序与面向对象程序

面向对象编程和面向对象编程的区别如下:

| 面向切面编程 | 面向对象的程序设计(Object Oriented Programming) |
| **方面:**封装切入点、建议和属性的代码单元。 | **类:**封装方法和属性的代码单元。 |
| **切入点:**定义执行建议的入口点集合。 | **方法签名:**定义方法体执行的入口点。 |
| **建议:**这是一个跨领域关注的实现。 | **方法体:**是业务逻辑关注点的实现。 |
| **wave:用建议构造代码(源码或对象)。** | **编译器:将源代码转换为目标代码。** |

![Spring Boot AOP](../img/4e747e7dda2c12afd04c48222056b0bf.png)

## Spring AOP 与 AspectJ

面向对象编程和面向对象编程的区别如下:

| 面向方面编程 | 实现 |
| 需要一个单独的编译过程。 | 它需要 AspectJ 编译器。 |
| 它只支持方法执行切入点。 | 它支持所有切入点。 |
| 它可以在 Spring Container 管理的 beans 上实现。 | 它可以在所有域对象上实现。 |
| 它只支持方法级编织。 | 它可以调用字段、方法、构造函数、静态初始化器、最终类等。 |

## AOP 建议的类型

有五种类型的 AOP 建议如下:

*   在建议之前
*   建议之后
*   围绕建议
*   投掷后
*   回来后

**在建议之前:**在连接点之前执行的建议称为在建议之前。我们使用**@在**注释将建议标记为在建议之前。

**After Advice:** 在连接点之后执行的建议称为 After Advice。我们使用 **@After** 注释将建议标记为 After advice。

**环绕建议:**在连接点前后执行的建议称为环绕建议。

**抛出建议后:**当连接点抛出异常时执行的建议。

**返回建议后:**方法执行成功时执行的建议。

在应用程序中实现 AOP 之前，我们需要在 pom.xml 文件中添加 **Spring AOP** 依赖项。

## Spring Boot 启动器 AOP

Spring Boot 启动器 AOP 是一个提供 Spring AOP 和 AspectJ 的依赖项。其中 AOP 提供基本的 AOP 功能，而 AspectJ 提供完整的 AOP 框架。

```java

<dependency>
<groupId>org.springframework.boot</groupId>
<artifactId>spring-boot-starter-aop</artifactId>
<version>2.2.2.RELEASE</version>
</dependency>

```

在下一节中，我们将在应用程序中实现不同的建议。

* * *