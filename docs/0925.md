# 使用注释的每个具体类的表

> 原文：<https://www.javatpoint.com/hibernate-table-per-concrete-class-using-annotation-tutorial-example>

1.  [使用注释的每个混凝土等级的表格](#)

在每个具体类都有表的情况下，每个类都会创建表。所以表中没有可空值。这种方法的缺点是在子类表中创建了重复的列。

这里，我们需要使用@Inheritance(策略= InheritanceType。父类中的 TABLE _ PER _ CLASS)注释和子类中的@AttributeOverrides 注释。

**@继承(策略= InheritanceType。TABLE_PER_CLASS)** 指定我们使用每个具体类的表策略。它应该只在父类中指定。

**@AttributeOverrides** 定义父类属性将在该类中被覆盖。在表结构中，父类表列将被添加到子类表中。

类别层次结构如下所示:

![table per concrete class](../img/1ee88d8a251b98174368673d823b622f.png)

| 每个表的表结构如下: |

#### 员工类别的表结构

![table per concrete class ](../img/e860c304a0bc275a7c4ad55342f540ec.png)

#### 常规员工类的表结构

![table per concrete class ](../img/9a9c3faaef7758bb73e14f1e73244f6a.png)

#### 合同 _ 员工类的表结构

![table per concrete class ](../img/ad264e5bc15b74a9c0664f6e305a7f51.png)

* * *

### 每个具体类别的表格示例

在这个例子中，我们创建了三个类，并在 employee.hbm.xml 文件中提供了这些类的映射。

### 1)创建持久类

您需要创建表示继承的持久类。让我们为上面的层次结构创建三个类:

File: Employee.java

```java
package com.javatpoint.mypackage;
import javax.persistence.*;

@Entity
@Table(name = "employee102")
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)

public class Employee {
@Id
@GeneratedValue(strategy=GenerationType.AUTO)

@Column(name = "id")
private int id;

@Column(name = "name")
private String name;

//setters and getters
}

```

File: Regular_Employee.java

```java
package com.javatpoint.mypackage;
import javax.persistence.*;

@Entity
@Table(name="regularemployee102")
@AttributeOverrides({
    @AttributeOverride(name="id", column=@Column(name="id")),
    @AttributeOverride(name="name", column=@Column(name="name"))
})
public class Regular_Employee extends Employee{

@Column(name="salary")	
private float salary;

@Column(name="bonus")	
private int bonus;

//setters and getters
}

```

File: Contract_Employee.java

```java
package com.javatpoint.mypackage;
import javax.persistence.*;
@Entity
@Table(name="contractemployee102")
@AttributeOverrides({
    @AttributeOverride(name="id", column=@Column(name="id")),
    @AttributeOverride(name="name", column=@Column(name="name"))
})
public class Contract_Employee extends Employee{

	@Column(name="pay_per_hour")
	private float pay_per_hour;

	@Column(name="contract_duration")
	private String contract_duration;

	public float getPay_per_hour() {
		return pay_per_hour;
	}
	public void setPay_per_hour(float payPerHour) {
		pay_per_hour = payPerHour;
	}
	public String getContract_duration() {
		return contract_duration;
	}
	public void setContract_duration(String contractDuration) {
		contract_duration = contractDuration;
	}
}

```

* * *

### 2)在 pom.xml 文件中添加项目信息和配置。

打开 pom.xml 文件，然后单击源代码。现在，在<dependencies>之间添加以下依赖关系....</dependencies>标签。

```java
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>5.3.1.Final</version>
</dependency>

<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>ojdbc14</artifactId>
    <version>10.2.0.4.0</version>
</dependency>

```

* * *

### 3)在配置文件中添加 hbm 文件的映射

File: hibernate.cfg.xml

```java
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 5.3//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-5.3.dtd">

<!-- Generated by MyEclipse Hibernate Tools.                   -->
<hibernate-configuration>
    <session-factory>
        <property name="hbm2ddl.auto">update</property>
        <property name="dialect">org.hibernate.dialect.Oracle9Dialect</property>
        <property name="connection.url">jdbc:oracle:thin:@localhost:1521:xe</property>
        <property name="connection.username">system</property>
        <property name="connection.password">jtp</property>
<property name="connection.driver_class">oracle.jdbc.driver.OracleDriver</property>

 		<mapping class="com.javatpoint.mypackage.Employee"/>
 		<mapping class="com.javatpoint.mypackage.Contract_Employee"/>
 		<mapping class="com.javatpoint.mypackage.Regular_Employee"/>
    </session-factory>
</hibernate-configuration>

```

hbm2ddl.auto 属性是为在数据库中创建自动表而定义的。

* * *

### 4)创建存储持久对象的类

在这个类中，我们只是将雇员对象存储在数据库中。

File: StoreData.java

```java
package com.javatpoint.mypackage;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.boot.Metadata;
import org.hibernate.boot.MetadataSources;
import org.hibernate.boot.registry.StandardServiceRegistry;
import org.hibernate.boot.registry.StandardServiceRegistryBuilder;

public class StoreData {

	public static void main(String[] args) {

		StandardServiceRegistry ssr=new StandardServiceRegistryBuilder().configure("hibernate.cfg.xml").build();
		Metadata meta=new MetadataSources(ssr).getMetadataBuilder().build();

		SessionFactory factory=meta.getSessionFactoryBuilder().build();
		Session session=factory.openSession();

		Transaction t=session.beginTransaction();

		Employee e1=new Employee();
		e1.setName("Gaurav Chawla");

		Regular_Employee e2=new Regular_Employee();
		e2.setName("Vivek Kumar");
		e2.setSalary(50000);
		e2.setBonus(5);

		Contract_Employee e3=new Contract_Employee();
		e3.setName("Arjun Kumar");
		e3.setPay_per_hour(1000);
		e3.setContract_duration("15 hours");

		session.persist(e1);
		session.persist(e2);
		session.persist(e3);

		t.commit();
		session.close();
		System.out.println("success");		
	}
}

```

* * *

[Download this example (Developed using Eclipse IDE)](hibernatepages/src/tpcannotation.zip)