# 使用注释的每个子类的表

> 原文:[https://www . javatpoint . com/hibernate-按子类表-使用-注释-教程-示例](https://www.javatpoint.com/hibernate-table-per-subclass-using-annotation-tutorial-example)

1.  [每个子类别的表](#)
2.  [每个子类的表格示例](#ex)

正如我们前面所指定的，对于每个子类策略的表，表是根据持久类创建的，但是它们是使用主键和外键来处理的。所以在关系中不会有任何重复的列。

我们需要指定**@继承(策略= InheritanceType。父类中的**和子类中的 **@PrimaryKeyJoinColumn** 注释。

让我们看看将要映射的类的层次结构。

![table per subclass strategy](../Images/1ee88d8a251b98174368673d823b622f.png)

每个表的表结构如下:

#### 员工类别的表结构

![table per subclass class ](../Images/e860c304a0bc275a7c4ad55342f540ec.png)

#### 常规员工类的表结构

![table per subclass class ](../Images/a76d6f4ce63f79f178b46caacabae783.png)

#### 合同 _ 员工类的表结构

![table per subclass class ](../Images/89e9d54ae9dde35740a0036cc638023a.png)

* * *

### 使用注释的每个子类的表格示例

在这个例子中，我们创建了三个类，并在 employee.hbm.xml 文件中提供了这些类的映射。

### 1)创建持久类

您需要创建表示继承的持久类。让我们为上面的层次结构创建三个类:

File: Employee.java

```
package com.javatpoint.mypackage;
import javax.persistence.*;

@Entity
@Table(name = "employee103")
@Inheritance(strategy=InheritanceType.JOINED)

public class Employee {
@Id
@GeneratedValue(strategy=GenerationType.AUTO)

@Column(name = "id")
private int id;

@Column(name = "name")
private String name;

//setters and getters
}

```

File: Regular_Employee.java

```
package com.javatpoint.mypackage;

import javax.persistence.*;

@Entity
@Table(name="regularemployee103")
@PrimaryKeyJoinColumn(name="ID")
public class Regular_Employee extends Employee{

@Column(name="salary")	
private float salary;

@Column(name="bonus")	
private int bonus;

//setters and getters
}

```

File: Contract_Employee.java

```
package com.javatpoint.mypackage;

import javax.persistence.*;

@Entity
@Table(name="contractemployee103")
@PrimaryKeyJoinColumn(name="ID")
public class Contract_Employee extends Employee{

	@Column(name="pay_per_hour")
	private float pay_per_hour;

	@Column(name="contract_duration")
	private String contract_duration;

	//setters and getters
}

```

* * *

### 2)在 pom.xml 文件中添加项目信息和配置。

打开 pom.xml 文件，然后单击源代码。现在，在<dependencies>之间添加以下依赖关系....</dependencies>标签。

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>5.3.1.Final</version>
</dependency>

<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>ojdbc14</artifactId>
    <version>10.2.0.4.0</version>
</dependency>

```

* * *

### 3)创建配置文件

打开 hibernate.cgf.xml 文件，添加一个映射资源的条目，如下所示:

```
<mapping class="com.javatpoint.mypackage.Employee"/>
<mapping class="com.javatpoint.mypackage.Contract_Employee"/>
<mapping class="com.javatpoint.mypackage.Regular_Employee"/>

```

现在，配置文件将如下所示:

File: hibernate.cfg.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 5.3//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-5.3.dtd">

<!-- Generated by MyEclipse Hibernate Tools.                   -->
<hibernate-configuration>

    <session-factory>
        <property name="hbm2ddl.auto">update</property>
        <property name="dialect">org.hibernate.dialect.Oracle9Dialect</property>
        <property name="connection.url">jdbc:oracle:thin:@localhost:1521:xe</property>
        <property name="connection.username">system</property>
        <property name="connection.password">jtp</property>
<property name="connection.driver_class">oracle.jdbc.driver.OracleDriver</property>

 		<mapping class="com.javatpoint.mypackage.Employee"/>
 		<mapping class="com.javatpoint.mypackage.Contract_Employee"/>
 		<mapping class="com.javatpoint.mypackage.Regular_Employee"/>
    </session-factory>

</hibernate-configuration>

```

hbm2ddl.auto 属性是为在数据库中创建自动表而定义的。

* * *

### 3)创建存储持久对象的类

在这个类中，我们只是将雇员对象存储在数据库中。

File: StoreData.java

```

package com.javatpoint.mypackage;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.boot.Metadata;
import org.hibernate.boot.MetadataSources;
import org.hibernate.boot.registry.StandardServiceRegistry;
import org.hibernate.boot.registry.StandardServiceRegistryBuilder;

public class StoreData {

	public static void main(String args[])
	{
		StandardServiceRegistry ssr = new StandardServiceRegistryBuilder().configure("hibernate.cfg.xml").build();
	    Metadata meta = new MetadataSources(ssr).getMetadataBuilder().build();

		SessionFactory factory=meta.getSessionFactoryBuilder().build();
		Session session=factory.openSession();

		 Transaction t=session.beginTransaction();  

		    Employee e1=new Employee();  
		    e1.setName("Gaurav Chawla");  

		    Regular_Employee e2=new Regular_Employee();  
		    e2.setName("Vivek Kumar");  
		    e2.setSalary(50000);  
		    e2.setBonus(5);  

		    Contract_Employee e3=new Contract_Employee();  
		    e3.setName("Arjun Kumar");  
		    e3.setPay_per_hour(1000);  
		    e3.setContract_duration("15 hours");  

		    session.persist(e1);  
		    session.persist(e2);  
		    session.persist(e3);  

		    t.commit();  
		    session.close();  
		    System.out.println("success");  	
	}
}

```

* * *

[Download this example (Developed using Eclipse IDE)](hibernatepages/src/tpsannotation.zip)

* * *