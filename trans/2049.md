# Hibernate 和 Struts 2 集成

> 原文:[https://www.javatpoint.com/hibernate-and-struts-integration](https://www.javatpoint.com/hibernate-and-struts-integration)

1.  [休眠和支撑 2 集成](#)
2.  [Hibernate 和 struts2 集成示例](#ex)

我们可以将任何 **struts 应用程序与 hibernate** 集成。不需要额外的努力。

在这个例子中，我们将使用带有 hibernate 的 struts 2 框架。您需要有 struts 2 和 hibernate 的 jar 文件。

* * *

### Hibernate 和 struts2 集成示例

在本例中，我们使用 struts2 创建注册表单，并使用 Hibernate 将这些数据存储到数据库中。让我们看看应该创建哪些文件来将 struts2 应用程序与 hibernate 集成。

*   **index.jsp**文件获取用户输入。
*   **User.java**处理请求的动作类。它使用 dao 类来存储数据。
*   **RegisterDao.java**一个使用 DAO 设计模式的 java 类，使用 hibernate 存储数据。
*   **user.hbm.xml** 一个包含持久类信息的映射文件。在这种情况下，动作类作为持久类工作。
*   **hibernate.cfg.xml** 包含数据库和映射文件信息的配置文件。
*   **struts.xml** 文件包含要调用的动作类和结果页面的信息。
*   **welcome.jsp**一个 jsp 文件，显示带有用户名的欢迎信息。
*   **web.xml** 一个包含 Struts 框架的 Controller 相关信息的 web.xml 文件。

#### index.jsp

在这个页面中，我们已经使用 struts 标签创建了一个表单。此表单的操作名称已注册。

```java

<%@ taglib uri="/struts-tags" prefix="S" %>

<S:form action="register">
<S:textfield name="name" label="Name"></S:textfield>
<S:submit value="register"></S:submit>

</S:form>

```

* * *

#### User.java

这是一个简单的 POJO 类。在这里，它作为 struts 的动作类和 hibernate 的持久类工作。它调用 RegisterDao 类的 register 方法，并以字符串形式返回成功。

```java

package com.javatpoint;

public class User {
private int id;
private String name;
//getters and setters

public String execute(){
	RegisterDao.saveUser(this);
	return "success";
}

}

```

* * *

#### RegisterDao.java

它是一个 java 类，使用 Hibernate 框架保存 User 类的对象。

```java

package com.javatpoint;

import org.hibernate.Session;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;

public class RegisterDao {

public static int saveUser(User u){

Session session=new Configuration().
configure("hibernate.cfg.xml").buildSessionFactory().openSession();

Transaction t=session.beginTransaction();
int i=(Integer)session.save(u);
t.commit();
session.close();

return i;

}

}

```

* * *

#### user.hbm.xml

这个映射文件包含 persitent 类的所有信息。

```java

<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
<class name="com.javatpoint.User" table="user451">
<id name="id">
<generator class="increment"></generator>
</id>
<property name="name"></property>
</class>

</hibernate-mapping>

```

* * *

#### hibernate.cfg.xml

该配置文件包含有关数据库和映射文件的信息。这里，我们使用的是 hb2ddl.auto 属性，因此不需要在数据库中创建表。

```java

<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<!-- Generated by MyEclipse Hibernate Tools.                   -->
<hibernate-configuration>

<session-factory>
<property name="hbm2ddl.auto">update</property>
<property name="dialect">org.hibernate.dialect.Oracle9Dialect</property>
<property name="connection.url">jdbc:oracle:thin:@localhost:1521:xe</property>
<property name="connection.username">system</property>
<property name="connection.password">oracle</property>
<property name="connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
<mapping resource="user.hbm.xml"/>

</session-factory>

</hibernate-configuration>

```

* * *

#### struts.xml

这些文件包含有关要调用的操作类的信息。这里的动作类是用户。

```java

<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation
//DTD Struts Configuration 2.1//EN" 
"http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>

<package name="abc" extends="struts-default">
<action name="register" class="com.javatpoint.User">
<result name="success">welcome.jsp</result>
</action>
</package>
</struts>    

```

* * *

#### welcome.jsp

欢迎文件显示带有用户名的欢迎消息。

```java
<%@ taglib uri="/struts-tags" prefix="S" %>

Welcome: <S:property value="name"/>

```

* * *

#### web.xml

它是包含控制器信息的 web.xml 文件。在 Struts2 的情况下，StrutsPrepareAndExecuteFilter 类作为控制器工作。

```java

<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" 

	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
	http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <filter>
  	<filter-name>struts2</filter-name>
  	<filter-class>
  org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
  	</filter-class>
  </filter>
  <filter-mapping>
  	<filter-name>struts2</filter-name>
  	<url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app>

```

* * *

[download this hibernate example](src/hb/strutsinteg.zip)